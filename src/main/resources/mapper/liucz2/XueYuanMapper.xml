<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.trkj.dao.liucz2.XueYuanMapper">

    <resultMap id="BaseResultMap" type="com.trkj.vo.queryLiucz2.XueYuanVo">
            <result property="empId" column="emp_id"/>
        <result property="chooseId" column="choose_id"/>
        <result property="cpId" column="cp_id" />
        <result property="createTime" column="create_time"/>
        <result property="mealId" column="meal_id" />
        <result property="mealType" column="meal_type"/>
        <result property="memberAddress" column="member_address"/>
        <result property="memberAge" column="member_age"/>
        <result property="memberDate" column="member_date"/>
        <result property="memberId" column="member_id"/>
        <result property="memberName" column="member_name"/>
        <result property="memberPhone" column="member_phone"/>
        <result property="memberSex" column="member_sex" />
        <result property="memberState" column="member_state"/>
        <result property="memberType" column="member_type"/>
        <result property="mmDate" column="mm_date"/>
        <result property="mmId" column="mm_id" />
        <result property="mmTime" column="mm_time"/>
        <result property="ptpId" column="ptp_id"/>
        <result property="updateTime" column="update_time"/>

    </resultMap>
    <select id="findAll" resultMap="BaseResultMap">
select cp.* , mm.* , me.* from choose_projectname cp left join member_meal mm on cp.mm_id=mm.mm_id left join  `member` me on me.member_id =mm.member_id	 where cp.emp_id=#{query.empId}
    <if test="query.mealType !=null and query.mealType !=''">
        and mm.meal_type=#{query.mealType}
    </if>
    <if test="query.memberName !=null and query.memberName !=''">
        and me.member_name=#{query.memberName}
    </if>


    </select>


</mapper>
